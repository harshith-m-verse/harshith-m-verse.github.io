{"version":3,"file":"dataadapters-mobilelistitemsadapter.d3837500.bundle.js","mappings":"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","sources":["webpack://1at06cs097/./dataAdapters/MobileListItemsAdapter.js"],"sourcesContent":["import axios from \"axios\";\n//import {toJS} from \"mobx\";\n\nclass MobileListItemsAdapter {\n  async adaptData(attachAttrib, apiData, listUrl, filterUrl,otherDefaultSelected, queryObj, isNextPage) {\n    \n    let data;\n    let response;\n    let url = filterUrl;\n    const defaultAttributes = attachAttrib ? attachAttrib:{};\n\n  //  console.log(\"MobileListItemsAdapter:queryObj = \",queryObj);\n\n\n    if(isNextPage && (attachAttrib.next_page_url==null || attachAttrib.nextPage==null)){\n      return {...defaultAttributes, loading:false};\n    }\n    \n    const product = otherDefaultSelected && otherDefaultSelected[0] ? otherDefaultSelected[0] : null;\n    const brand =  queryObj &&  queryObj.brand ? queryObj.brand : null;\n    const minprice = queryObj && queryObj.minprice ? queryObj.minprice : null; \n    const maxprice = queryObj && queryObj.maxprice ? queryObj.maxprice : null;\n    const sort = queryObj && queryObj.sort ? queryObj.sort : null;\n    const features = queryObj && queryObj.features ? queryObj.features : null;\n    \n\n  // console.log(\"MobileListItemsAdapter:args: \",toJS(arguments));\n\n    if(typeof(queryObj)!=\"undefined\" && queryObj){\n      \n      for(let key in queryObj){\n        if(key===\"price\"){\n          url += `&minprice=${queryObj[key].minprice}&maxprice=${queryObj[key].maxprice}`\n        }else{\n          url += `&${key}=${queryObj[key]}`;\n        }\n      }\n    }\n    \n    url = url.replace(\"<product>\",product).replace(\"brands\",\"brand\");\n\n    if(isNextPage && attachAttrib.next_page_url){\n      url = attachAttrib.next_page_url.replace('<page>',attachAttrib.nextPage);\n\n    }\n    \n  //console.log(\"Final Url: \",url);\n\n    let items = [];\n\n    try{\n      if( isNextPage && attachAttrib && Array.isArray(items) && attachAttrib.items.length>0){\n        items.push(...attachAttrib.items);\n      }\n     \n      response = await axios.get(url);\n      response = response.data;\n   //   console.log(\"MobileListItemsAdapter: response: \",response);\n      data = response?.data;\n      for (let i = 0; data && i < data.length; i++) {\n        if (data[i]) {\n          try{\n            const obj = this.selectItemsToShow(data[i], product||attachAttrib.product);\n            obj && obj.forEach((el)=>items.push(el));\n          }catch(err){\n            console.log('MobileListItemsAdapter-data: ',err);\n          }\n        }\n    }\n    }catch(err){\n      console.log('MobileListItemsAdapter: ',err);\n    }\n\n    if(items.length==0){\n      items = null;\n    }\n\n    return {\n      ...defaultAttributes,\n      items:items,\n      nextPage: response?.next_page_url?(attachAttrib.nextPage||1) + 1:null,\n      next_page_url: response?.next_page_url || null,\n      product:product||attachAttrib.product,\n    }\n  }\n\n  // FUNCTIONS TO PICK WHAT TO SHOW \n  selectItemsToShow(data, product){\n\n    const variants = [];\n\n    let obj = {\n      name: data.name,\n      image: data.photo,\n      os:data.os,  // 1. OS common for all \n      product: product || attachAttrib.product,\n      redirectUrl: `/details?product=${product}&id=${data?.id}&lang=<lang>`,\n      redirectPageTitle:data?.name??\"\"\n    };\n\n    if(product==\"mobile\"){\n      obj = {\n        ...obj,\n        camera: data.camera // 2. Camera for Mobile \n      };\n\n      if(obj.camera && data.front_camera){\n        obj.camera = obj.camera + \" + \" + data.front_camera;\n      }\n\n      // pt.3,4 take 2 values from variants besides price and id\n      if(data && data.variants){\n        data.variants.forEach((item)=>{\n          const currentVariant = {...obj};\n          for(const key in item){\n            if(key!=\"name\" && key!=\"image\" && key!=\"os\"){\n              currentVariant[key] = item[key];\n            }\n          }\n          variants.push(currentVariant);\n        });\n      }\n  \n    }else if(product==\"laptop\"){\n      obj = {\n        ...obj,\n        processor:data.processor||data.display,\n      }\n      if(data && data.variants){\n        data.variants.forEach((item)=>{\n          const currentVariant = {...obj};\n          for(const key in item){\n            if(key!=\"name\" && key!=\"image\" && key!=\"os\"){\n              currentVariant[key] = item[key];\n            }\n          }\n          variants.push(currentVariant);\n        });\n      }\n    }else if(product==\"smart-tv\"){\n      obj = {\n        ...obj,\n        processor:data.processor,\n      }\n      if(!obj.more_features && data.more_features){ \n        obj.more_features = data.more_features\n      }\n\n      if(data && data.variants){\n        data.variants.forEach((item)=>{\n          const currentVariant = {...obj};\n          for(const key in item){\n            if(key!=\"name\" && key!=\"image\" && key!=\"os\"){\n              currentVariant[key] = item[key];\n            }\n          }\n          variants.push(currentVariant);\n        });\n      }\n    }\n\n    if(variants.length<1){\n      return null;\n    }\n    return variants;\n  }\n}\n\nexport default MobileListItemsAdapter;\n"],"names":["MobileListItemsAdapter","attachAttrib","apiData","listUrl","filterUrl","otherDefaultSelected","queryObj","isNextPage","url","defaultAttributes","next_page_url","nextPage","loading","product","brand","minprice","maxprice","sort","features","key","replace","items","Array","isArray","length","push","axios","get","response","data","i","obj","this","selectItemsToShow","forEach","el","err","console","log","variants","name","image","photo","os","redirectUrl","id","redirectPageTitle","camera","front_camera","item","currentVariant","processor","display","more_features"],"sourceRoot":""}